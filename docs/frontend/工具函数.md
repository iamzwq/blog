# Utils.js

## debounce

```javascript
const debounce = (fn, delay = 1000) => {
  let timer = null;

  return () => {
    if (timer) clearTimeout(timer);

    timer = setTimeout(() => {
      fn.apply(this, arguments);
    }, delay);

    // 立即执行
    if (!timer) fn.apply(this, arguments);
  };
};
```

## throttle

```javascript
const throttle = (fn, delay = 1000) => {
  let pre = 0;

  return () => {
    const now = Date.now();
    if (now - pre > delay) {
      pre = now;
      fn();
    }
  };
};

const throttleV2 = (fn, delay = 1000) => {
  let timer = null;

  return () => {
    if (timer) return;

    timer = setTimeout(() => {
      fn.apply(this, arguments);
      timer = null;
    }, delay);
  };
};
```

## isObj

```javascript
const isObj = (value) => typeof value === "object" && value !== null;
```

## deepClone

```javascript
const deepClone = (target) => {
  if (!isObj) return target;

  const result = Array.isArray(target) ? [] : {};

  for (let key in target) {
    if (target.hasOwnProperty(key)) {
      if (isObj(target[key])) {
        result[key] = deepClone(target[key]);
      } else {
        result[key] = target[key];
      }
    }
  }

  return result;
};
```

## get

```javascript
const get = (
  obj: any,
  path: string[] | string,
  defaultValue: any = undefined
) => {
  let newPath = [];
  if (Array.isArray(path)) {
    newPath = path;
  } else {
    newPath = path.replace(/\[/g, ".").replace(/\]/g, "").split(".");
  }

  return (
    newPath.reduce((reslut, current) => {
      return (reslut || {})[current];
    }, obj) || defaultValue
  );
};
```
